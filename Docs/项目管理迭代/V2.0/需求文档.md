# 需求文档
## 简介
### 题目
基于微信的毕设选题系统
### 时间线
开题时间：2016.12.16
### 技术栈
前端vue
后端laravel
### 系统描述
毕业课设选题系统，来源于院系要求。
首先希望能够解决的问题是增加专业方向限制的功能，即本方向的人只能选择本方向的课题。另外老的系统由于开发时间较早，界面以及功能等方面渐渐不能满足现在的需求。
同时也希望在选课上面进行一些改变，添加一些有趣的玩法。也做的更加合理。同时开发的时候考虑可扩展性，以快速接入其他院系。

### 新特性
- 基于微信开发的移动端，更加易用，界面更加美观。
- 一个学生可以选择多个课题，解决学生需求。
- 老师的课题可以自己动态录入并且修改，给老师自由的权限。
- 课题成交之后推送信息给相关老师和同学，并对其他选择该课题的同学进行自动退选操作。
- 时间拉长，把抢课这种短期操作。时间拉长，让双方有更充足的时间互相了解。

## 功能需求
### 教务科提供EXCEL进行数据录入
- 老师 —— 姓名，工号，系(主要兼容选课系统，电信学院有4个系)
- 学生 —— 姓名，学号，院系(主要兼容选课系统，可能有跨学院选课的情况)，单个专业方向(一个学生只要一个专业方向，在系统中只能看到该方向的课程)
- 教务科账号
    - `spArg_SelecNum` 每个学生同时可以选择多少个老师发意向(参数化，当前系统默认同时只可以选择单个老师的课题)
    - 学校，院系，入学年份(可扩展性考虑，方便接入其他学校或者院系)
    - 教务科PC端系统的账号密码
- 专业方向对照表 (如0:互联网,1:电磁波,2:通信)
- 院里系表对照表 (如0:电信,1:通信,2:无线,3:电磁波) 

**细节注释：**
1. EXCEL由系统设计者设计提供给教务科填写 (@TODO 设计EXCEL格式)
2. 之所以重构当前系统是因为之前的系统无法支持对学生进行专业方向的限制(重做的硬需求所在，没有这个需求的院系则按照单个专业方向)
3. 先通过微信授权基本信息，录入微信UID，然后再提供<学号，姓名>等信息的认证，认证后才可以进行其他操作。
4. 教务科PC系统提供导入EXCEL表
5. 教务科账号由许炜老师手动导入，暂时不对外提供接口(手动调用PHP脚本，输入相应的参数)

### 导入教务科信息
手动导入教务科信息后，教务科通过PC端页面登录，
1. 上传(student,teacher,direction)三份表。
2. 课程列表，分两个TAB栏(互选中，已互选)。同时显示(已互选课题数/总课题数，已互选学生数/总学生人数)
### 老师录入课程
老师认证通过后。可以录入自己的课题信息(单个老师的课题数目不设限制)。 
  
课程信息包括：
- 题目
- 所需人数
- 专业方向
- 说明
** 注意：老师可以指定学生可选该课题，需要同时录入学生的姓名和电话(防止重名问题)。其他学生不可选该课题。老师可以随时删除课题**

可以录入个人信息
- 电话
- QQ(许炜老师强调)
- 邮箱
- 自我介绍


### 学生选择课程
学生可以同时向不大于`spArg_SelecNum`的毕设题目发出选择意向，选题之后双方可互见联系方式(强制双方认证时必须填写手机号码，次而QQ，鼓励电话沟通，更加高效)。
学生可以随时退选课程，老师也可以任何时候退选学生(至高权利)。

### 课题成交通知
老师从选定其课题的学生中选择自己中意的学生，将其他也选了该课题的学生退选并发送消息。
这里首先试图通过微信公众号推送消息给具体的用户，如果不成功则通过系统内部的消息系统进行消息的推送，公众号推送成功则内部消息系统不予以推送。

### 结束后提供导出功能
提供PC端的界面给教务科即管理人员查看现在的进度情况，在结束选题之后允许其对数据进行导出。
导出功能则最后完成。


## 界面设计细节
### 课题页面
**页面显示**
- 搜索：按照导师姓名与课程搜索
- 翻页（点击上一页，下一页，左右滑翻页，以及滚轮滑多页），显示当前页数与总页数
- 课题列表: 显示题目，选定人数/所需人数，导师姓名，火热程度(共3颗星)。
注：双选成功后的课题标灰色（将缔结关系的学生显示在导师姓名之后）且放在双选中的课程之后，同时，双选中/已双选的课题按创建时间晚的在最前面。
另外： 学生只能看到其专业方向内的毕设项目。

**点击具体某个课程后**
老师：可以看到 课题名称，导师姓名，方向，所需人数，说明，当前双选进度。但是无法查看导师与学生的个人信息。
学生：可以看到 课题名称，导师姓名，方向，所需人数，说明，当前双选进度，提供选定按钮(1.已互选的课程隐藏 2. 当前学生要是选择到了上限则弹出提示其已不能再多选)。


### 进度
**页面显示**
- 课程列表:题目，选定人数/所需人数,火热程度,课题状态
- 创建新课程的按钮

**点击具体课程**
显示： 题目，所需人数，专业方向，说明，当前学生列表(点击可查看该学生的个人信息)，修改按钮(点击修改后可以修改课题信息，并且修改按钮变成保存，点击更新线上数据)，
选定学生按钮(从下上弹一个popup多选学生信息，通过所需人数来控制可以选择几个学生)

**点击创建课程**
- 题目
- 所需人数
- 专业方向
- 说明

### 消息
推送消息的列表，信息包括题目，日期以及内容的前20个字。点击单条信息，alert出该条消息具体的内容。
每次点击去拉去线上的消息列表。

### 我的
学生： 学校，院系，专业方向，姓名，学号,电话号码，QQ,邮箱，自我介绍。
老师： 学校，院系，系，姓名，工号,电话号码，QQ,邮箱，自我介绍。

点击修改按钮，可以修改部分信息。

### 其他
每次进入弹窗提示当前所有课程进展。
- 最新公布题目数
- 总共题目数
- 成交题目数